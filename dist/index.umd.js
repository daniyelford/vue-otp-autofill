(function(e,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(e=typeof globalThis<"u"?globalThis:e||self,e.OtpInput=i(e.Vue))})(this,(function(e){"use strict";function i(f){const c=e.ref("");let o=null,r=null;const l=async()=>{if(!(!("OTPCredential"in window)||!navigator.credentials?.get)){o&&o.abort(),o=new AbortController;try{const s=await navigator.credentials.get({otp:{transport:["sms"]},signal:o.signal});if(s?.code){const u=String(s.code).match(/\d+/)?.[0]||"";c.value=u,e.nextTick(()=>{const h=document.querySelectorAll(".otp-container input");u.split("").slice(0,f).forEach((g,t)=>{h[t].value=g})}),r&&(clearInterval(r),r=null)}}catch(s){s.message&&s.message}}},m=()=>{r&&clearInterval(r),c.value||(r=setInterval(()=>{c.value||l()},1e3))};return e.onUnmounted(()=>{r&&clearInterval(r),o&&o.abort()}),{otpResult:c,requestOTP:m}}const y={class:"otp-container"},k=["onUpdate:modelValue","onInput","onKeydown"];return{__name:"OtpInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:6},reset:{type:Number,default:0}},emits:["update:modelValue"],setup(f,{emit:c}){const o=f,r=c,l=e.ref(Array.from({length:o.length},(t,n)=>o.modelValue[n]||"")),{otpResult:m,requestOTP:s}=i(o.length),u=t=>{const n={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return t.replace(/[۰-۹]/g,a=>n[a])},h=(t,n)=>{const a=u(t.target.value).replace(/[^0-9]/g,"").charAt(0)||"";l.value[n]=a,a&&n<l.value.length-1&&e.nextTick(()=>t.target.parentElement.children[n+1].focus())},g=(t,n)=>{const a=t.currentTarget.parentElement.children;if(t.key==="Backspace"){!l.value[n]&&n>0&&e.nextTick(()=>a[n-1].focus());return}t.key==="ArrowLeft"&&n>0&&e.nextTick(()=>a[n-1].focus()),t.key==="ArrowRight"&&n<l.value.length-1&&e.nextTick(()=>a[n+1].focus())};return e.watch(l,()=>{r("update:modelValue",l.value.join(""))},{deep:!0}),e.watch(m,t=>{l.value=u(t).split("").slice(0,o.length),r("update:modelValue",t)}),e.watch(o.reset,()=>{l.value=e.ref(Array.from({length:o.length},(t,n)=>"")),s()}),e.onMounted(()=>{const t=document.createElement("style");t.textContent=`
    .otp-container { direction: ltr;display: flex; gap: 0.5rem; justify-content: space-evenly; }
    .digit-box { width: 1.5rem; height: 2rem; font-size: 1rem; text-align: center; border: 2px solid black; border-radius: 6px; }
    .bounce { animation: pulse 0.3s ease-in-out alternate; } 
      @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }
    `,document.head.appendChild(t),s()}),(t,n)=>(e.openBlock(),e.createElementBlock("div",y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(a,d)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:d,type:"text",class:e.normalizeClass(["digit-box",{bounce:a!==""}]),"onUpdate:modelValue":p=>l.value[d]=p,maxlength:"1",onInput:p=>h(p,d),onKeydown:p=>g(p,d)},null,42,k)),[[e.vModelText,l.value[d]]])),128))]))}}}));
