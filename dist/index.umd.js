(function(t,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(t=typeof globalThis<"u"?globalThis:t||self,t.OtpInput=r(t.Vue))})(this,(function(t){"use strict";const r=(s,p)=>{const l=s.__vccOpts||s;for(const[u,o]of p)l[u]=o;return l},f={class:"otp-container"},m=["onUpdate:modelValue","onInput","onKeydown","placeholder"];return r({__name:"OtpInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:6},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:p}){const l=s,u=p,o=t.ref(Array(l.length).fill(""));t.watch(()=>l.modelValue,n=>{if(n!==o.value.join("")){const c=n.split("").slice(0,l.length);o.value=Array.from({length:l.length},(i,e)=>c[e]||"")}},{immediate:!0}),t.watch(o,n=>{u("update:modelValue",n.join(""))});function h(n,c){n.target.value&&c<l.length-1&&document.querySelectorAll(".otp-input")[c+1]?.focus()}function g(n){!o.value[n]&&n>0&&document.querySelectorAll(".otp-input")[n-1]?.focus()}async function y(n=6e4){if(!("OTPCredential"in window))return;const c=new AbortController,i=c.signal;setTimeout(()=>c.abort(),n);try{const e=await navigator.credentials.get({otp:{transport:["sms"]},signal:i});e?.code&&e.code.split("").forEach((a,d)=>{d<l.length&&(o.value[d]=a)})}catch(e){console.warn("OTP AutoFill failed:",e.message)}}return t.onMounted(()=>{y()}),(n,c)=>(t.openBlock(),t.createElementBlock("div",f,[t.createTextVNode(t.toDisplayString(o.value)+" ",1),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.value,(i,e)=>t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:e,class:"otp-input","onUpdate:modelValue":a=>o.value[e]=a,maxlength:"1",onInput:a=>h(a,e),onKeydown:t.withKeys(t.withModifiers(a=>g(e),["prevent"]),["backspace"]),placeholder:s.placeholder||e+1},null,40,m)),[[t.vModelText,o.value[e]]])),128))]))}},[["__scopeId","data-v-deaa89c5"]])}));
